{% extends "base.html" %}

{% block title %}Dashboard | Placement Tracker{% endblock %}

{% block content %}
<h2 class="text-4xl font-semibold mb-10 animate-pulse">Welcome, Student ðŸ‘‹</h2>

<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
  
  <!-- Applied Jobs -->
  <div class="glass glow rounded-2xl p-8 transition duration-500 hover:scale-105">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-medium">Applied Jobs</h3>
      <span class="bg-green-500/20 text-green-300 text-xs px-3 py-1 rounded-full">Active</span>
    </div>
    <div class="flex items-center justify-center">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135673.png" class="w-10 h-10 mr-3">
      <p class="text-6xl font-extrabold text-green-400 drop-shadow-lg counter" data-target="{{ stats.applied_jobs }}">0</p>
    </div>
    <p class="mt-3 text-gray-300 text-sm">Total companies applied till now</p>

    <!-- progress -->
    <div class="mt-6">
      <p class="text-xs text-gray-400 mb-1">Goal: 10 Applications</p>
      <div class="w-full bg-gray-700 rounded-full h-3">
        <div class="bg-gradient-to-r from-green-400 to-emerald-600 h-3 rounded-full" style="width: {{ stats.applied_jobs|floatformat:0 }}0%;"></div>
      </div>
    </div>
  </div>

  <!-- Upcoming Exams -->
  <div class="glass glow rounded-2xl p-8 transition duration-500 hover:scale-105">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-medium">Upcoming Exams</h3>
      <span class="bg-orange-500/20 text-orange-300 text-xs px-3 py-1 rounded-full">Next 7 days</span>
    </div>
    <div class="flex items-center justify-center">
      <img src="https://cdn-icons-png.flaticon.com/512/2910/2910768.png" class="w-10 h-10 mr-3">
      <p class="text-6xl font-extrabold text-orange-400 drop-shadow-lg counter" data-target="{{ stats.upcoming_exams }}">0</p>
    </div>
    <p class="mt-3 text-gray-300 text-sm">Donâ€™t miss your upcoming tests ðŸš€</p>

    <!-- list of next exams -->
    <ul class="mt-6 text-sm space-y-2 text-gray-300">
      <li class="flex items-center"><span class="mr-2">ðŸ“Œ</span> Aptitude Test â€“ 2 Sept</li>
      <li class="flex items-center"><span class="mr-2">ðŸ“Œ</span> Coding Round â€“ 5 Sept</li>
    </ul>
  </div>

  <!-- Placement Status -->
  <div class="glass glow rounded-2xl p-8 transition duration-500 hover:scale-105">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-medium">Placement Status</h3>
      <span class="bg-indigo-500/20 text-indigo-300 text-xs px-3 py-1 rounded-full">In Progress</span>
    </div>
    <div class="flex items-center justify-center">
      <img src="https://cdn-icons-png.flaticon.com/512/190/190411.png" class="w-10 h-10 mr-3">
      <p class="text-3xl font-bold {% if stats.placement_status == 'Placed' %}text-green-400{% else %}text-red-400{% endif %}">
        {{ stats.placement_status }}
      </p>
    </div>
    <p class="mt-2 text-gray-300 text-sm">Latest update: Waiting for interview results</p>

    <!-- Stage Timeline -->
    <div class="mt-6">
      <p class="text-xs text-gray-400 mb-2">Placement Journey</p>
      <div class="flex items-center justify-between text-xs text-gray-300">
        <span class="text-green-400 font-semibold">Applied</span>
        <span class="text-green-400 font-semibold">Test</span>
        <span class="text-green-400 font-semibold">Shortlisted</span>
        <span class="text-yellow-400 font-semibold">Interview</span>
        <span class="text-gray-400">Offer</span>
        <span class="text-gray-400">Joined</span>
      </div>
      <div class="w-full bg-gray-700 rounded-full h-2 mt-2">
        <div class="bg-gradient-to-r from-green-400 via-yellow-400 to-indigo-500 h-2 rounded-full" style="width: 65%;"></div>
      </div>
    </div>
  </div>

</div>

<!-- Counter Animation Script -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const counters = document.querySelectorAll(".counter");
    counters.forEach(counter => {
      counter.innerText = "0";
      const updateCounter = () => {
        const target = +counter.getAttribute("data-target");
        const current = +counter.innerText;
        const increment = Math.ceil(target / 50); 
        if (current < target) {
          counter.innerText = current + increment;
          setTimeout(updateCounter, 30);
        } else {
          counter.innerText = target;
        }
      };
      updateCounter();
    });
  });
</script>
{% endblock %}
